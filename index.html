<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <!-- =============================================================
       ๐ง ูุณุงุจูุฉ ุงููุนูููุงุช โ ููู ุงููุงุฌูุฉ ุงูุฑุฆูุณูุฉ index.html
       ูุฐุง ุงูููู ูุนุฑูู ุงููููู ุงูุนุงู ููู ุงูุดุงุดุงุช (Screens) ูุงูููุงูุฐ ุงูููุจุซูุฉ (Modals)
       ูุน ุฅุนุฏุงุฏุงุช ุงููุตูู (Accessibility) ูุงูุฏุนู ูููุธูุฑูู ุงูุฏุงูู/ุงููุงุชุญุ
       ูุฑูุงุจุท ุงููููุงุช ุงูุฎุงุฑุฌูุฉ (CSS/JS) ูุงูููุชุจุงุช ุงููุงุฒูุฉ (CropperJS + Supabase)
       ุฌููุน ุงูุชุนูููุงุช ุชูุถูุญูุฉ ุจุงููุบุฉ ุงูุนุฑุจูุฉ ูุชุณููู ุงูููู.
  ================================================================ -->

  <!-- ุงูุชุฑููุฒ ูุฏุนู ุงูุฃุฌูุฒุฉ ุงููุญูููุฉ -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <meta name="description" content="ูุนุจุฉ ูุณุงุจูุฉ ูุนูููุงุช ุชูุงุนููุฉ ูุชุนุฏุฏุฉ ุงููุณุชููุงุช ูุน ููุญุฉ ุตุฏุงุฑุฉ ููุณุงุนุฏุงุช." />
  <meta name="theme-color" content="#0f3460" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">

  <!-- ุงูุนููุงู ูุงูุฃููููุฉ -->
  <title>๐ง ูุณุงุจูุฉ ุงููุนูููุงุช | Hybrid Edition</title>
  <link rel="icon" type="image/png" href="https://em-content.zobj.net/thumbs/120/apple/354/brain_1f9e0.png" />

  <!-- ุฎุทูุท ุบูุบู: ุฎุท Cairo ูุฏุนู ุงูุนุฑุจูุฉ -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet" />

  <!-- ููุชุจุฉ CropperJS ูุชุนุฏูู/ูุต ุงูุตูุฑุฉ ุงูุฑูุฒูุฉ ุฏุงุฎู ูุงูุฐุฉ ุงููุญุฑูุฑ -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css" integrity="sha512-yNw2Jb7l8yH0bS2p1n2s0uH3jI8Xz0P4m9JbO9m9U0p8XQp9g7Vf1mC2xgZzNDN+Gxwqk8Zz0x2x5wS8h0C0wA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- ููู ุงูุชูุณููุงุช ุงูุฑุฆูุณู ูููุดุฑูุน (ูุญุชูู ุนูู ุชุตููู ุงูุดุงุดุงุช ูุงูุซูู) -->
  <link rel="stylesheet" href="style.css" />

  <!-- ุจูุงูุงุช ููุธููุฉ (Structured Data) ูุชุญุณูู ุงูุธููุฑ ูู ูุญุฑูุงุช ุงูุจุญุซ -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "VideoGame",
    "name": "๐ง ูุณุงุจูุฉ ุงููุนูููุงุช",
    "description": "ูุนุจุฉ ูุณุงุจูุฉ ุชูุงุนููุฉ ูุงุฎุชุจุงุฑ ุงููุนูููุงุช ูู ูุณุชููุงุช ูุชุนุฏุฏุฉ ูุน ููุญุฉ ุตุฏุงุฑุฉ.",
    "applicationCategory": "GameApplication",
    "operatingSystem": "Web Browser",
    "author": { "@type": "Person", "name": "MS AbuQusay" }
  }
  </script>

  <!--
    โ ููุงุญุธุฉ ูููุฉ ูุชูููู ูููุถ ุชุบููุฑ ุงููุธูุฑ (FART):
    ูุถุจุท ุณูุฉ ุงููุธูุฑ (ุฏุงูู/ูุงุชุญ) ูุจููุฑูุง ูุจู ุฑุณู ุงูุตูุญุฉ ุงุนุชูุงุฏูุง ุนูู LocalStorage.
    ูุฐุง ุงูุณูุฑุจุช ุตุบูุฑ ุฌุฏูุง ููุถููู ููุง ูุถูุงู ุงูุชูููุฐ ุงููุจูุฑ.
  -->
  <script>
    (function() {
      try {
        var saved = localStorage.getItem('theme') || 'dark';
        document.documentElement.setAttribute('data-theme', saved);
      } catch (e) {
        document.documentElement.setAttribute('data-theme', 'dark');
      }
    })();
  </script>
</head>

<body aria-live="polite">
  <!-- =============================================================
       โ ุฑุณุงูุฉ ุจุฏููุฉ ุนูุฏ ุชุนุทูู ุงูุฌุงูุงุณูุฑุจุช
       ุชูุถุญ ูููุณุชุฎุฏู ุฃู ุงููุนุจุฉ ุชุญุชุงุฌ JavaScript ูุชุนูู
  ================================================================ -->
  <noscript>
    ุงูุฑุฌุงุก ุชูุนูู ุงูุฌุงูุงุณูุฑุจุช ูู ุงููุชุตูุญ ูุชุนูู ุงููุนุจุฉ ุจุดูู ุตุญูุญ.
  </noscript>

  <!-- =============================================================
       โ ุญุงููุฉ ุงูุชูุจููุงุช (Toasts)
       ุชูุณุชุฎุฏู ูุนุฑุถ ุฑุณุงุฆู ูุฌุงุญ/ุฎุทุฃ/ูุนูููุงุช ุฃุนูู ุงูุตูุญุฉ.
       ูุชุนุงูู ูุนูุง ุงูููุฏ ุนุจุฑ ุฅุถุงูุฉ ุนูุงุตุฑ .toast ุฏุงุฎู ูุฐุง ุงูุนูุตุฑ.
  ================================================================ -->
  <div id="toast-container" class="toast-container" aria-live="assertive"></div>

  <!-- =============================================================
       ๐ ุฒุฑ ุนุงุฆู ููุฅุจูุงุบ ุนู ูุดููุฉ ุจุณุฑุนุฉ (ููุชุญ ูุงูุฐุฉ ุงูุจูุงุบุงุช)
       ูููู ุฑุจุทู ูุงุญููุง ุจุญุฏุซ ููุชุญ modal ุงูุจูุงุบุงุช.
  ================================================================ -->
  <button id="reportErrorFab" class="report-fab" type="button" title="ุงูุฅุจูุงุบ ุนู ูุดููุฉ" aria-label="ุงูุฅุจูุงุบ ุนู ูุดููุฉ">
    โ๏ธ
  </button>

  <!-- =============================================================
       โ๏ธ ุฒุฑ ุนุงุฆู ููุถุน ุงููุทููุฑ (ูุธูุฑ ููุท ุจุนุฏ ุงูุชูุนูู)
       ุณูููู ุงูุณูุฑุจุช ุจุชุจุฏูู ุญุงูุชู ูุฅุธูุงุฑู/ุฅุฎูุงุฆู.
  ================================================================ -->
  <button id="devFloatingBtn" class="dev-fab inactive" type="button" title="ุชุจุฏูู ูุถุน ุงููุทููุฑ" style="display:none">
    <span>โก</span>
  </button>

  <!-- =============================================================
       ๐ฅ๏ธ ุงูุดุงุดุงุช ุงูุฑุฆูุณูุฉ (Screens)
       ููุงุญุธุฉ: ูู ุดุงุดุฉ ุนูุตุฑ .screen ุจุงุฑุชูุงุน ูุงููุ ููุชู ุฅุธูุงุฑ/ุฅุฎูุงุก ุงูุดุงุดุงุช
       ุจุฅุถุงูุฉ/ุฅุฒุงูุฉ ุงูุตูู .active ุนุจุฑ ุงูุณูุฑุจุช. ุดุงุดุฉ ูุงุญุฏุฉ ูุดุทุฉ ูู ูู ูุญุธุฉ.
  ================================================================ -->

  <!-- ุดุงุดุฉ ุงูุชุญููู ุงูุฃููู ุฃุซูุงุก ุชุฌููุฒ ุงูููุงุฑุฏ -->
  <section id="loader" class="screen active" role="status" aria-label="ุฌุงุฑู ุงูุชุญููู">
    <div class="spinner" aria-hidden="true"></div>
    <p id="loaderText" class="game-subtitle" style="margin-top:1rem">ุฌุงุฑู ุชุญููู ุงููุนุจุฉ...</p>
  </section>

  <!-- ุดุงุดุฉ ุงูุจุฏุงูุฉ: ุนุฑุถ ุงูุนููุงู ูุงูุฃุฒุฑุงุฑ ุงูุฑุฆูุณูุฉ -->
  <section id="startScreen" class="screen" aria-labelledby="startTitle">
    <div class="content-box">
      <header class="screen-header">
        <h1 id="startTitle" class="game-title">๐ง ูุณุงุจูุฉ ุงููุนูููุงุช</h1>
        <p class="game-subtitle">ุงุฎุชุจุฑ ูุนูููุงุชู ูุชุญุฏูู ุฃุตุฏูุงุกู ุนุจุฑ ูุณุชููุงุช ูุชุนุฏุฏุฉ</p>
      </header>
      <div class="button-group start-menu">
        <!-- ุงูุฃุฒุฑุงุฑ ููุนุฑููุฉ ุจุจูุงูุงุช data-action ูููุฑุฃูุง ุงูุณูุฑุจุช ูููุฌู ุงูุชุฏูู -->
        <button class="btn-main" data-action="showAvatarScreen">ุงุจุฏุฃ ุงููุนุจ</button>
        <button class="btn-secondary" data-action="showLeaderboard">ููุญุฉ ุงูุตุฏุงุฑุฉ</button>
        <button class="btn-secondary" data-action="showDevPasswordModal">ูุถุน ุงููุทููุฑ</button>
      </div>
    </div>
  </section>

  <!-- ุดุงุดุฉ ุงุฎุชูุงุฑ ุงูุตูุฑุฉ ุงูุฑูุฒูุฉ -->
  <section id="avatarScreen" class="screen" aria-labelledby="avatarTitle">
    <div class="content-box">
      <header class="screen-header"><h2 id="avatarTitle">ุงุฎุชุฑ ุตูุฑุชู ุงูุฑูุฒูุฉ</h2></header>
      <!-- ุดุจูุฉ ุงูุตูุฑ ุงูุฑูุฒูุฉ ุชูููุฃ ุฏููุงูููููุง ูู ุงูุณูุฑุจุช (populateAvatarGrid) -->
      <div class="avatar-grid" role="group" aria-label="ุฎูุงุฑุงุช ุงูุตูุฑ ุงูุฑูุฒูุฉ"></div>
      <div class="button-group">
        <!-- ูุชู ุชูุนูู ุงูุฒุฑ ุจุนุฏ ุงุฎุชูุงุฑ ุตูุฑุฉ -->
        <button id="confirmAvatarBtn" class="btn-main" data-action="showNameEntryScreen" disabled>ุงูุชุงูู</button>
      </div>
    </div>
  </section>

  <!-- ุดุงุดุฉ ุฅุฏุฎุงู ุงูุงุณู -->
  <section id="nameEntryScreen" class="screen" aria-labelledby="nameTitle">
    <div class="content-box">
      <header class="screen-header"><h2 id="nameTitle">ุฃุฏุฎู ุงุณูู</h2></header>
      <div class="form-group">
        <label for="nameInput" class="sr-only">ุงุณู ุงููุงุนุจ</label>
        <input id="nameInput" type="text" inputmode="text" autocomplete="name" placeholder="ูุซูุงู: ุนุจุฏ ุงููู" maxlength="25" aria-required="true" aria-describedby="nameError" />
        <div id="nameError" class="error-message" aria-live="polite"></div>
      </div>
      <div class="button-group">
        <!-- ูุชูุนูู ุนูุฏ ุชุญูู ุงูุดุฑูุท (>=3 ุฃุญุฑู) -->
        <button id="confirmNameBtn" class="btn-main" data-action="confirmName" disabled>ุชุฃููุฏ ุงูุงุณู</button>
      </div>
    </div>
  </section>

  <!-- ุดุงุดุฉ ุงูุชุนูููุงุช ูุจู ุงูุจุฏุก -->
  <section id="instructionsScreen" class="screen screen--align-top" aria-labelledby="instTitle">
    <div class="content-box">
      <header class="screen-header"><h2 id="instTitle">๐ ุชุนูููุงุช ุงููุนุจุฉ</h2></header>
      <div class="instructions-content">
        <!-- ุนูุงุตุฑ ุงูุชุนูููุงุช ุจุดูู ููุงุท ูุฎุชุตุฑุฉ ูุน ุฃููููุงุช -->
        <div class="instruction-item"><span class="instruction-icon">โ๏ธ</span><div><strong>ุงูููุงุท:</strong><br>ุตุญูุญุฉ +100 / ุฎุงุทุฆุฉ -50 / ููุงูุฃุฉ ุณุฑุนุฉ +50 (ุฅุฐุง ุฃุฌุจุช ูุจู ููุชุตู ุงูููุช).</div></div>
        <div class="instruction-item"><span class="instruction-icon">โฑ๏ธ</span><div><strong>ุงูููุช:</strong><br>30 ุซุงููุฉ ููู ุณุคุงู โ ุงูุชูุงุก ุงูููุช = ุฎุทุฃ.</div></div>
        <div class="instruction-item"><span class="instruction-icon">๐๏ธ</span><div><strong>ุงููุณุงุนุฏุงุช:</strong><br>50:50 ู โ๏ธ ุชุฌููุฏ 10ุซ (ูุฑุฉ ูุงุญุฏุฉ ููู ุฌููุฉ) โ โญ๏ธ ุชุฎุทู ุบูุฑ ูุญุฏูุฏ ูุชุฒุฏุงุฏ ูููุชู 20 ููุทุฉ ูู ูุฑุฉ.</div></div>
        <div class="instruction-item"><span class="instruction-icon">๐ฏ</span><div><strong>ุงููุณุชููุงุช:</strong><br>ุณูู / ูุชูุณุท / ุตุนุจ / ูุณุชุญูู โ ุงูุงูุชูุงู ุนุจุฑ ูุงูุฐุฉ ููุงูุฉ ุงููุณุชูู.</div></div>
        <div class="instruction-item"><span class="instruction-icon">๐ซ</span><div><strong>ุงูุฃุฎุทุงุก:</strong><br>ูุณููุญ 3 ุฃุฎุทุงุก ููู ุฌููุฉ.</div></div>
        <div class="instruction-item"><span class="instruction-icon">๐ฉ</span><div><strong>ุงูุฏุนู:</strong><br>ุชูุงุตู ุนุจุฑ <a href="https://x.com/_MS_AbuQusay" target="_blank" rel="noopener noreferrer">X</a> ุฃู <a href="https://www.instagram.com/_ms_abuqusay" target="_blank" rel="noopener noreferrer">Instagram</a>.</div></div>
      </div>
      <div class="button-group">
        <button class="btn-main" data-action="postInstructionsStart">ุญุณูุงูุ ูููุช</button>
      </div>
    </div>
  </section>

  <!-- ุดุงุดุฉ ุงุฎุชูุงุฑ ุงููุณุชูู (ุชุธูุฑ ููุท ูู ูุถุน ุงููุทููุฑ) -->
  <section id="levelSelectScreen" class="screen" aria-labelledby="devLevelTitle">
    <div class="content-box">
      <header class="screen-header"><h2 id="devLevelTitle">ุงุฎุชุฑ ูุณุชูู ููุจุฏุก (ูุถุน ุงููุทููุฑ)</h2></header>
      <div class="level-selection-grid">
        <button class="btn-secondary" data-level-index="0" data-action="startDevLevel">ุณูู</button>
        <button class="btn-secondary" data-level-index="1" data-action="startDevLevel">ูุชูุณุท</button>
        <button class="btn-secondary" data-level-index="2" data-action="startDevLevel">ุตุนุจ</button>
        <button class="btn-secondary" data-level-index="3" data-action="startDevLevel">ูุณุชุญูู</button>
      </div>
    </div>
  </section>

  <!-- ุดุงุดุฉ ุงููุนุจ ุงูุฑุฆูุณูุฉ -->
  <main id="gameContainer" class="screen" aria-label="ุดุงุดุฉ ุงููุนุจ">
    <!-- ุดุฑูุท ุนููู ูุญุชูู ุฒุฑ ุฅููุงุก + ูุคุดุฑุงุช ูุณุชูู + ุฒุฑ ุชุจุฏูู ุงููุธูุฑ -->
    <div class="top-bar">
      <button class="end-quiz-btn" data-action="showConfirmExitModal" aria-label="ุฅููุงุก ุงููุณุงุจูุฉ">๐ช ุฅููุงุก</button>
      <div class="level-progress" aria-label="ุชูุฏู ุงููุณุชููุงุช">
        <!-- ูุคุดุฑุงุช ุงููุณุชููุงุช 1..4 ูุน ูุณูู ุชูุถูุญูุฉ -->
        <div class="level-indicator" data-level="easy" data-tooltip="ุงููุณุชูู ุงูุณูู">1</div>
        <div class="level-indicator" data-level="medium" data-tooltip="ุงููุณุชูู ุงููุชูุณุท">2</div>
        <div class="level-indicator" data-level="hard" data-tooltip="ุงููุณุชูู ุงูุตุนุจ">3</div>
        <div class="level-indicator" data-level="impossible" data-tooltip="ุงููุณุชูู ุงููุณุชุญูู">4</div>
      </div>
      <button class="theme-toggle-btn" type="button" data-action="toggleTheme" aria-label="ุชุจุฏูู ูุถุน ุงูุณุทูุน ูุงูุธูุงู">โ๏ธ</button>
    </div>

    <!-- ุฑุฃุณ ุงููุนุจุฉ: ุชูุงุตูู ุงููุงุนุจ + ุงููุณุงุนุฏุงุช -->
    <header class="game-header">
      <!-- ูุนูููุงุช ุงููุงุนุจ -->
      <div class="player-info">
        <div class="player-main">
          <img id="playerAvatar" src="" alt="ุงูุตูุฑุฉ ุงูุฑูุฒูุฉ ููุงุนุจ" loading="lazy" decoding="async" />
          <div class="player-details">
            <span id="playerName" aria-label="ุงุณู ุงููุงุนุจ"></span>
            <span id="playerId" class="player-id"></span>
          </div>
        </div>
        <div class="player-stats" aria-label="ุฅุญุตุงุกุงุช ุงููุงุนุจ">
          <div class="stat-item">ุงูููุงุท: <strong id="currentScore" aria-live="polite">100</strong></div>
          <div class="stat-item">ุงูุฃุฎุทุงุก: <strong id="wrongAnswersCount" aria-live="assertive">0 / 3</strong></div>
          <div class="stat-item">ุงูุชุฎุทู: <strong id="skipCount">0</strong></div>
        </div>
      </div>

      <!-- ุงููุณุงุนุฏุงุช ุงูุซูุงุซุฉ: 50:50 / ุชุฌููุฏ / ุชุฎุทู -->
      <div class="helpers" role="group" aria-label="ุฎูุงุฑุงุช ุงููุณุงุนุฏุฉ">
        <button class="helper-btn" data-type="fiftyFifty" aria-describedby="fiftyFiftyDesc">50:50 <span class="helper-cost">(100)</span></button>
        <button class="helper-btn" data-type="freezeTime" aria-describedby="freezeTimeDesc">โ๏ธ 10ุซ <span class="helper-cost">(100)</span></button>
        <button class="helper-btn" data-type="skipQuestion" aria-describedby="skipQuestionDesc">โญ๏ธ ุชุฎุทู <span id="skipCost" class="helper-cost">(20)</span></button>
      </div>
      <!-- ุฃูุตุงู ูููุณุงุนุฏุงุช (ููุฑูุกุฉ ููุงุฑุฆ ุงูุดุงุดุฉ) -->
      <p id="fiftyFiftyDesc" class="sr-only">ุญุฐู ุฎูุงุฑูู ุฎุงุทุฆูู ูุฑุฉ ูุงุญุฏุฉ ูู ูู ุฌููุฉ.</p>
      <p id="freezeTimeDesc" class="sr-only">ุชุฌููุฏ ุงููุคูุช ููุฏุฉ 10 ุซูุงูู ูุฑุฉ ูุงุญุฏุฉ ูู ูู ุฌููุฉ.</p>
      <p id="skipQuestionDesc" class="sr-only">ุชุฎุทู ุงูุณุคุงู ุงูุญุงูู. ูุชุฒุงูุฏ ุซูู ุงูุชุฎุทู 20 ููุทุฉ ูู ูู ูุฑุฉ.</p>
    </header>

    <!-- ูุคููุช ุงูุณุคุงู: ุดุฑูุท ุชูุฏูู + ุนุฏูุงุฏ ุซูุงูู -->
    <div class="timer-container" aria-label="ูุคูุช ุงูุณุคุงู">
      <div class="timer-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="100"></div>
      <span class="timer-text">30</span>
    </div>

    <!-- ููุทูุฉ ุงูุณุคุงู ูุงูุฎูุงุฑุงุช -->
    <div class="main-content">
      <section class="question-box" aria-labelledby="questionCounter">
        <div class="level-badge" id="currentLevelBadge">ุณูู</div>
        <h3 id="questionCounter">ุงูุณุคุงู 1 ูู 10</h3>
        <p id="questionText" aria-live="polite"></p>
      </section>

      <section class="options-container" aria-labelledby="questionText">
        <div class="options-grid" role="group" aria-label="ุฎูุงุฑุงุช ุงูุฅุฌุงุจุฉ"></div>
      </section>
    </div>
  </main>

  <!-- ุดุงุดุฉ ููุงูุฉ ุงููุณุชูู: ุชุนุฑุถ ููุฎุตูุง ุตุบูุฑูุง ุซู ุฎูุงุฑ ูุชุงุจุนุฉ/ุงูุณุญุงุจ -->
  <section id="levelCompleteScreen" class="screen" aria-labelledby="levelCompleteTitle">
    <div class="content-box">
      <header class="screen-header"><h2 id="levelCompleteTitle">๐ ุฃูููุช ุงููุณุชูู!</h2></header>
      <div class="level-stats">
        <p>ุงูููุงุท ุงูุญุงููุฉ: <strong id="levelScore"></strong></p>
        <p>ุนุฏุฏ ุงูุฃุฎุทุงุก: <strong id="levelErrors"></strong></p>
        <p>ุงูุฃุณุฆูุฉ ุงูุตุญูุญุฉ: <strong id="levelCorrect"></strong></p>
      </div>
      <div class="button-group">
        <button class="btn-main" data-action="nextLevel">ุงููุณุชูู ุงูุชุงูู</button>
        <button class="btn-secondary" data-action="endGame">ุงูุงูุณุญุงุจ ูุนุฑุถ ุงููุชุงุฆุฌ</button>
      </div>
    </div>
  </section>

  <!-- ุดุงุดุฉ ุงูููุงูุฉ: ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ + ุงููุดุงุฑูุฉ + ุฑูุงุจุท ุงูุนูุฏุฉ -->
  <section id="endScreen" class="screen screen--align-top" aria-labelledby="finalTitle">
    <div class="content-box">
      <header class="screen-header"><h2 id="finalTitle">๐ ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ ๐</h2></header>
      <div class="final-stats">
        <p>โ๏ธ ุงูุงุณู: <strong id="finalName"></strong></p>
        <p>๐ ุงููุนุฑูู: <strong id="finalId"></strong></p>
        <p>๐ข ุฑูู ุงููุญุงููุฉ: <strong id="finalAttemptNumber"></strong></p>
        <p>โ ุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ: <strong id="finalCorrect"></strong></p>
        <p>โ ุงูุฅุฌุงุจุงุช ุงูุฎุงุทุฆุฉ: <strong id="finalWrong"></strong></p>
        <p>โญ๏ธ ูุฑุงุช ุงูุชุฎุทู: <strong id="finalSkips"></strong></p>
        <p>โญ ุงูููุงุท ุงูููุงุฆูุฉ: <strong id="finalScore"></strong></p>
        <p>โฑ๏ธ ุงูููุช ุงููุณุชุบุฑู: <strong id="totalTime"></strong></p>
        <p>๐ ุงููุณุชูู ุงูุฐู ูุตูุช ุฅููู: <strong id="finalLevel"></strong></p>
        <p>๐ฏ ูุณุจุฉ ุงูุฏูุฉ: <strong id="finalAccuracy"></strong></p>
        <p>โณ ูุชูุณุท ููุช ุงูุฅุฌุงุจุฉ: <strong id="finalAvgTime"></strong></p>
        <div class="performance-rating"><span>ุฃุฏุงุคู: </span><strong id="performanceText"></strong></div>
      </div>
      <section class="share-section" aria-labelledby="shareTitle">
        <h3 id="shareTitle">๐ข ูุดุงุฑูุฉ ุงููุชุงุฆุฌ</h3>
        <div class="share-buttons">
          <button class="share-btn x" data-action="shareOnX" type="button">X</button>
          <button class="share-btn instagram" data-action="shareOnInstagram" type="button">Instagram</button>
        </div>
      </section>
      <div class="button-group">
        <button class="btn-main" data-action="playAgain">ูุนุจ ูุฑุฉ ุฃุฎุฑู</button>
        <button class="btn-secondary" data-action="showLeaderboard">ููุญุฉ ุงูุตุฏุงุฑุฉ</button>
      </div>
    </div>
  </section>

  <!-- ุดุงุดุฉ ููุญุฉ ุงูุตุฏุงุฑุฉ -->
  <section id="leaderboardScreen" class="screen screen--align-top" aria-labelledby="lbTitle">
    <div class="content-box">
      <header class="screen-header"><h2 id="lbTitle">๐ ููุญุฉ ุงูุตุฏุงุฑุฉ ๐</h2></header>
      <!-- ุงููุญุชูู ููุญูู ุฏููุงูููููุง ูู ุงูุณูุฑุจุช (renderLeaderboard) -->
      <div id="leaderboardContent" aria-live="polite"></div>
      <div class="button-group">
        <button class="btn-secondary" data-action="showStartScreen">ุงูุนูุฏุฉ</button>
      </div>
    </div>
  </section>

  <!-- =============================================================
       ๐ช ุงูููุงูุฐ ุงูููุจุซูุฉ (Modals)
       ุชูุนุฑุถ ููู ุงูุดุงุดุงุช ุนูุฏ ุงูุญุงุฌุฉ. ุฌููุนูุง ุชูุฏุงุฑ ุนุจุฑ ุงูุณูุฑุจุช ุจุฅุถุงูุฉ/ุฅุฒุงูุฉ .active
  ================================================================ -->

  <!-- ูุงูุฐุฉ ุชุฃููุฏ ุงูุฎุฑูุฌ/ุฅููุงุก ุงููุณุงุจูุฉ -->
  <div id="confirmExitModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="confirmExitTitle" aria-describedby="confirmExitDesc">
    <div class="modal-content">
      <h3 id="confirmExitTitle">ุฅููุงุก ุงููุณุงุจูุฉ</h3>
      <p id="confirmExitDesc">ุณูุชู ุญูุธ ููุงุทู ุงูุญุงููุฉ. ูู ุชุฑุบุจ ูู ุงููุชุงุจุนุฉุ</p>
      <div class="modal-buttons">
        <button class="btn-main" data-action="endGame">ูุนู</button>
        <button class="btn-secondary" data-action="closeModal" data-modal-id="confirmExitModal">ูุง</button>
      </div>
    </div>
  </div>

  <!-- ูุงูุฐุฉ ุฅุฑุณุงู ุจูุงุบ ูุชูุฏู -->
  <div id="advancedReportModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="reportTitle">
    <div class="modal-content">
      <h3 id="reportTitle">ุงูุฅุจูุงุบ ุนู ูุดููุฉ</h3>
      <!-- ุงููููุฐุฌ ููุฑุณู ุฅูู Supabase ุนุจุฑ ุงูุณูุฑุจุช (handleReportSubmit) -->
      <form id="reportProblemForm">
        <div class="form-group">
          <label for="problemType">ููุน ุงููุดููุฉ:</label>
          <select id="problemType" name="problemType" required>
            <option value="">ุงุฎุชุฑ ููุน ุงููุดููุฉ...</option>
            <option value="technical">ูุดููุฉ ุชูููุฉ (ุชุฌูุฏุ ุจุทุก)</option>
            <option value="question_error">ุฎุทุฃ ูู ุงูุณุคุงู ุฃู ุงูุฅุฌุงุจุฉ</option>
            <option value="account_issue">ูุดููุฉ ูู ุงูุญุณุงุจ ุฃู ุงูููุงุท</option>
            <option value="suggestion">ุงูุชุฑุงุญ ูุชุญุณูู ุงููุนุจุฉ</option>
            <option value="other">ุฃุฎุฑู</option>
          </select>
        </div>
        <div class="form-group">
          <label for="problemDescription">ูุตู ุงููุดููุฉ:</label>
          <textarea id="problemDescription" name="problemDescription" placeholder="ูุฑุฌู ุชูุฏูู ุชูุงุตูู ุฏูููุฉ..." required></textarea>
        </div>
        <!-- (ุงุฎุชูุงุฑู ูุงุญููุง) ุฑูุน ููุทุฉ ุดุงุดุฉ -->
        <!-- <div class="form-group">
          <label for="reportScreenshot">ููุทุฉ ุดุงุดุฉ (ุงุฎุชูุงุฑู):</label>
          <input type="file" id="reportScreenshot" accept="image/*" />
        </div> -->
        <div class="modal-buttons">
          <button type="submit" class="btn-main">ุฅุฑุณุงู ุงูุจูุงุบ</button>
          <button type="button" class="btn-secondary" data-action="closeModal" data-modal-id="advancedReportModal">ุฅูุบุงุก</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ูุงูุฐุฉ ูุญุฑูุฑ ุงูุตูุฑุฉ ุงูุฑูุฒูุฉ (ูุต/ุชุนุฏูู) -->
  <div id="avatarEditorModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="avatarEditTitle">
    <div class="modal-content">
      <h3 id="avatarEditTitle">ุชุนุฏูู ุงูุตูุฑุฉ ุงูุฑูุฒูุฉ</h3>
      <div id="image-editor-container">
        <!-- ุชูููุฃ ุงูุตูุฑุฉ ุนูุฏ ุงูุฑูุน ุนุจุฑ FileReader -->
        <img id="image-to-crop" src="" alt="ุงูุตูุฑุฉ ุงููุฑุงุฏ ูุตููุง" />
      </div>
      <div class="modal-buttons">
        <button class="btn-main" data-action="saveCroppedAvatar">ุญูุธ ุงูุตูุฑุฉ</button>
        <button class="btn-secondary" data-action="closeModal" data-modal-id="avatarEditorModal">ุฅูุบุงุก</button>
      </div>
    </div>
  </div>

  <!-- ูุงูุฐุฉ ูููุฉ ูุฑูุฑ ูุถุน ุงููุทููุฑ -->
  <div id="devPasswordModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="devPwdTitle" aria-describedby="devPwdDesc">
    <div class="modal-content">
      <h3 id="devPwdTitle">ูุถุน ุงููุทููุฑ</h3>
      <p id="devPwdDesc">ุงูุฑุฌุงุก ุฅุฏุฎุงู ูููุฉ ุงููุฑูุฑ ูุชูุนูู ูุถุน ุงููุทููุฑ.</p>
      <div class="form-group" style="margin:1rem 0 0.5rem;">
        <label for="devPasswordInput" class="sr-only">ูููุฉ ุงููุฑูุฑ</label>
        <input type="password" id="devPasswordInput" placeholder="ูููุฉ ุงููุฑูุฑ" aria-describedby="devPasswordError" />
      </div>
      <div id="devPasswordError" class="error-message" aria-live="assertive"></div>
      <div class="modal-buttons">
        <button class="btn-main" data-action="checkDevPassword">ุฏุฎูู</button>
        <button class="btn-secondary" data-action="closeModal" data-modal-id="devPasswordModal">ุฅูุบุงุก</button>
      </div>
    </div>
  </div>

  <!-- ูุงูุฐุฉ ุชูุงุตูู ุงููุงุนุจ (ุนูุฏ ุงูุถุบุท ุนูู ุนูุตุฑ ูู ููุญุฉ ุงูุตุฏุงุฑุฉ) -->
  <div id="playerDetailsModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="playerDetailsTitle">
    <div class="modal-content">
      <header class="player-details-header">
        <img id="detailsAvatar" src="" alt="ุตูุฑุฉ ุงููุงุนุจ" class="player-details-avatar" />
        <h3 id="playerDetailsTitle">ุชูุงุตูู ุงููุงุนุจ</h3>
        <span id="detailsPlayerId" class="player-id"></span>
        <h4 id="detailsName"></h4>
      </header>
      <div id="playerDetailsContent" class="player-details-body"><!-- ููููุฃ ูู ุงูุณูุฑุจุช --></div>
      <div class="modal-buttons">
        <button class="btn-secondary" data-action="closeModal" data-modal-id="playerDetailsModal">ุฅุบูุงู</button>
      </div>
    </div>
  </div>

  <!-- =============================================================
       ๐ฆ ุงูููุชุจุงุช ุงูุฎุงุฑุฌูุฉ (ูุฌุจ ุฃู ุชูุญููู ูุจู script.js ุฅู ูุงู ุงูุณูุฑุจุช ูุนุชูุฏ ุนูููุง)
  ================================================================ -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js" integrity="sha512-Xt0bTz3bVv9q7VhWQe2a9x5z3wWb2h0W1Q2jO7gk3i8mJEL6mJ9b0r0tS3Xc8eQZcYk2vYw6mK1Xv7w1M7q2Wg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- ููู ูุธุงุฆู ุงููุงุฌูุฉ (ูุญุชูู ุนูู ูู ููุทู ุงููุนุจุฉ ูุฅุฏุงุฑุฉ ุงูุญุงูุฉ) -->
  <script src="script.js" defer></script>
</body>
</html>
