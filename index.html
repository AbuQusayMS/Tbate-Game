<!DOCTYPE html>
<html lang="ar" dir="rtl" class="theme-dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุณุงุจูุฉ ุงููุนูููุงุช</title>
    
    <!-- ุฑุงุจุท ุฎุท Cairo ูู Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- ุฑุงุจุท ููู ุงูุชุตููู CSS -->
    <link rel="stylesheet" href="styles.css">

    <!-- ููุชุจุฉ Supabase ููุชูุงุนู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

    <!-- ุญุงููุฉ ุงูุชุทุจูู ุงูุฑุฆูุณูุฉ -->
    <div id="app-container">

        <!-- ุงูููุฏุฑ ุงูุนููู ููุญุชูู ุนูู ุฒุฑ ุชุจุฏูู ุงููุถุน -->
        <header class="app-header">
            <h1 class="logo">ูุณุงุจูุฉ ุงููุนูููุงุช</h1>
            <button id="theme-toggle-btn" class="icon-btn" title="ุชุจุฏูู ุงููุถุน">
                <!-- ุฃููููุฉ ุงูุดูุณ (ุงููุถุน ุงููุงุชุญ) -->
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sun-icon"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                <!-- ุฃููููุฉ ุงูููุฑ (ุงููุถุน ุงููุธูู) -->
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="moon-icon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            </button>
        </header>

        <!-- ุงููุญุชูู ุงูุฑุฆูุณู ุงูุฐู ุชุชุบูุฑ ููู ุงูุดุงุดุงุช -->
        <main id="main-content">
            <!-- ุดุงุดุฉ ุงูุจุฏุงูุฉ -->
            <div id="start-screen" class="screen active">
                <h2>ุฃููุงู ุจู ูู ูุณุงุจูุฉ ุงููุนูููุงุช!</h2>
                <p>ุงุฎุชุจุฑ ูุนูููุงุชู ูุชุญุฏู ุงูุขุฎุฑูู ูุชุตู ุฅูู ููุฉ ููุญุฉ ุงูุตุฏุงุฑุฉ.</p>
                <button id="start-game-btn" class="btn btn-primary">ุงุจุฏุฃ ุงููุนุจ ุงูุขู</button>
                <button id="leaderboard-btn-from-start" class="btn btn-secondary">ุนุฑุถ ููุญุฉ ุงูุตุฏุงุฑุฉ</button>
                 <button id="dev-mode-btn" class="btn btn-tertiary">ูุถุน ุงููุทูุฑ</button>
            </div>

            <!-- ุดุงุดุฉ ุงุฎุชูุงุฑ ุงูุตูุฑุฉ ุงูุฑูุฒูุฉ -->
            <div id="avatar-screen" class="screen">
                <h2>ุงุฎุชุฑ ุตูุฑุชู ุงูุฑูุฒูุฉ</h2>
                <div id="avatar-selection-grid" class="avatar-grid">
                    <!-- ุณูุชู ููุก ุงูุตูุฑ ุงูุฑูุฒูุฉ ููุง ุนุจุฑ JavaScript -->
                </div>
                <button id="confirm-avatar-btn" class="btn btn-primary" disabled>ุชุฃููุฏ ุงูุตูุฑุฉ</button>
            </div>

            <!-- ุดุงุดุฉ ุฅุฏุฎุงู ุงูุงุณู -->
            <div id="name-screen" class="screen">
                <h2>ูุง ูู ุงุณููุ</h2>
                <input type="text" id="player-name-input" placeholder="ุฃุฏุฎู ุงุณูู ููุง (2-25 ุญุฑู)" maxlength="25">
                <button id="confirm-name-btn" class="btn btn-primary">ููุจุฏุฃ!</button>
            </div>
            
            <!-- ุดุงุดุฉ ุงูุชุนูููุงุช -->
            <div id="instructions-screen" class="screen">
                <h2>ุงูุชุนูููุงุช</h2>
                <ul class="instructions-list">
                    <li>ูุฏูู 30 ุซุงููุฉ ููู ุณุคุงู.</li>
                    <li>3 ูุญุงููุงุช ุฎุงุทุฆุฉ ุชููู ุงูุฌููุฉ.</li>
                    <li>ุงุณุชุฎุฏู ุงููุณุงุนุฏุงุช ุจุญููุฉ!</li>
                </ul>
                <button id="play-now-btn" class="btn btn-primary">ูููุชุ ููุง ููุนุจ!</button>
            </div>
            
             <!-- ุดุงุดุฉ ุงุฎุชูุงุฑ ุงููุณุชูู (ูุถุน ุงููุทูุฑ ููุท) -->
            <div id="level-selection-screen" class="screen">
                <h2>ุงุฎุชุฑ ูุณุชูู ููุจุฏุก (ูุถุน ุงููุทูุฑ)</h2>
                <div class="level-buttons">
                    <button class="btn btn-level" data-level="easy">ุณูู</button>
                    <button class="btn btn-level" data-level="medium">ูุชูุณุท</button>
                    <button class="btn btn-level" data-level="hard">ุตุนุจ</button>
                    <button class="btn btn-level" data-level="impossible">ูุณุชุญูู</button>
                </div>
            </div>

            <!-- ุดุงุดุฉ ุงููุนุจ ุงูุฑุฆูุณูุฉ -->
            <div id="game-screen" class="screen">
                <div class="game-header">
                    <div id="player-info">
                        <img id="game-avatar" src="" alt="Avatar" class="avatar-small">
                        <span id="game-player-name"></span>
                    </div>
                    <div id="game-stats">
                        <span>ุงูููุงุท: <span id="score">100</span></span>
                        <span>ุงููุณุชูู: <span id="level-name"></span></span>
                        <span>ุงูุฃุฎุทุงุก: <span id="wrong-answers-count">0 / 3</span></span>
                    </div>
                </div>
                <div id="timer-container">
                    <div id="timer-bar"></div>
                </div>
                <div id="question-container">
                    <h3 id="question-text"></h3>
                    <div id="options-container" class="options-grid">
                        <!-- ุฃุฒุฑุงุฑ ุงูุฎูุงุฑุงุช ุณุชูุถุน ููุง -->
                    </div>
                </div>
                <div id="helpers-container">
                    <button id="fifty-fifty-btn" class="btn helper-btn">50:50</button>
                    <button id="freeze-time-btn" class="btn helper-btn">ุชุฌููุฏ (10 ุซ)</button>
                    <button id="skip-question-btn" class="btn helper-btn">ุชุฎุทู (<span id="skip-cost">20</span> ููุทุฉ)</button>
                </div>
                 <button id="exit-game-btn" class="btn btn-danger">ุฅููุงุก ุงููุนุจุฉ</button>
            </div>

            <!-- ุดุงุดุฉ ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ -->
            <div id="results-screen" class="screen">
                <h2>๐ ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ ๐</h2>
                <div id="final-results-details" class="results-grid">
                    <!-- ุชูุงุตูู ุงููุชุงุฆุฌ ุณุชูุถุน ููุง -->
                </div>
                <div class="results-actions">
                    <button id="share-x-btn" class="btn btn-primary">ุงูุดุฑ ุนูู ๐</button>
                    <button id="copy-results-btn" class="btn btn-secondary">ูุณุฎ ุงููุต</button>
                    <button id="play-again-btn" class="btn btn-tertiary">ุงูุนุจ ูุฌุฏุฏุงู</button>
                    <button id="main-menu-btn" class="btn btn-tertiary">ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
                </div>
            </div>

            <!-- ุดุงุดุฉ ููุญุฉ ุงูุตุฏุงุฑุฉ -->
            <div id="leaderboard-screen" class="screen">
                <h2>ููุญุฉ ุงูุตุฏุงุฑุฉ</h2>
                <div class="leaderboard-filters">
                    <button class="btn filter-btn active" data-filter="all">ุงููู</button>
                    <button class="btn filter-btn" data-filter="top10">ุฃูุถู 10</button>
                    <button class="btn filter-btn" data-filter="impossible">ูุชุฎุทู ุงููุณุชุญูู</button>
                </div>
                <div id="leaderboard-list">
                    <!-- ูุงุฆูุฉ ุงููุงุนุจูู ุณุชูุถุน ููุง -->
                </div>
                <button id="back-to-menu-btn" class="btn btn-secondary">ุงูุนูุฏุฉ ูููุงุฆูุฉ</button>
            </div>

        </main>
    </div>

    <!-- ุญุงููุฉ ุงูููุงูุฐ ุงูููุจุซูุฉ (Modals) -->
    <div id="modal-container" class="hidden">
        
        <!-- ูุงูุฐุฉ ููุงูุฉ ุงููุณุชูู -->
        <div id="end-level-modal" class="modal">
            <div class="modal-content">
                <h3 id="end-level-title"></h3>
                <p id="end-level-message"></p>
                <div class="modal-actions">
                    <button id="next-level-btn" class="btn btn-primary">ุงููุณุชูู ุงูุชุงูู</button>
                    <button id="withdraw-btn" class="btn btn-secondary">ุงูุณุญุงุจ ูุนุฑุถ ุงููุชุงุฆุฌ</button>
                </div>
            </div>
        </div>
        
        <!-- ูุงูุฐุฉ ุชูุงุตูู ูุงุนุจ ูู ููุญุฉ ุงูุตุฏุงุฑุฉ -->
        <div id="player-details-modal" class="modal">
            <div class="modal-content">
                <button class="close-modal-btn">&times;</button>
                <h3 id="player-details-title">ุชูุงุตูู ุงููุงุนุจ</h3>
                <div id="player-details-content">
                    <!-- ุชูุงุตูู ููุชุงุฆุฌ ุงููุงุนุจ ุณุชูุถุน ููุง -->
                </div>
            </div>
        </div>
        
        <!-- ูุงูุฐุฉ ุชุฃููุฏ ุงูุฎุฑูุฌ -->
        <div id="confirm-exit-modal" class="modal">
            <div class="modal-content">
                <h3>ูู ุฃูุช ูุชุฃูุฏุ</h3>
                <p>ุณุชุฎุณุฑ ุชูุฏูู ุงูุญุงูู ูููุงุทู ุฅุฐุง ุฎุฑุฌุช ุงูุขู.</p>
                 <div class="modal-actions">
                    <button id="confirm-exit-btn" class="btn btn-danger">ูุนูุ ุฃุฎุฑุฌ</button>
                    <button class="cancel-modal-btn btn btn-secondary">ุฅูุบุงุก</button>
                </div>
            </div>
        </div>
        
        <!-- ูุงูุฐุฉ ูููุฉ ูุฑูุฑ ุงููุทูุฑ -->
        <div id="dev-password-modal" class="modal">
            <div class="modal-content">
                <button class="close-modal-btn">&times;</button>
                <h3>ูุถุน ุงููุทูุฑ</h3>
                <p>ุงูุฑุฌุงุก ุฅุฏุฎุงู ูููุฉ ุงููุฑูุฑ ูููุตูู ุฅูู ุฃุฏูุงุช ุงูุชุทููุฑ.</p>
                <input type="password" id="dev-password-input" class="modal-input">
                 <div class="modal-actions">
                    <button id="submit-dev-password-btn" class="btn btn-primary">ุฏุฎูู</button>
                </div>
            </div>
        </div>

        <!-- ูุงูุฐุฉ ุงูุฅุจูุงุบ ุนู ูุดููุฉ -->
        <div id="report-modal" class="modal">
            <!-- ูู ูุชู ุชูููุฐูุง ุจุนุฏุ ูููู ุฅุถุงูุชูุง ูุงุญููุง -->
        </div>

    </div>

    <!-- ุดุงุดุฉ ุงูุชุญููู -->
    <div id="loader" class="loader-overlay hidden">
        <div class="spinner"></div>
        <p>ุฌุงุฑู ุงูุชุญููู...</p>
    </div>

    <!-- ุนูุตุฑ ูุนุฑุถ ุงูุฑุณุงุฆู ุงููุคูุชุฉ (Toast) -->
    <div id="toast-notification" class="toast"></div>
    
    <!-- ุฑุงุจุท ููู JavaScript ุงูุฑุฆูุณู -->
    <script src="script.js" defer></script>
</body>
</html>
